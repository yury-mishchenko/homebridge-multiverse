{
  "pluginAlias": "homebridge-multiverse",
  "pluginType": "platform",
  "singular": true,
  "headerDisplay": "Homebridge Multiverse",
  "schema": {
    "type": "object",
    "properties": {
      "platform": {
        "type": "string",
        "const": "homebridge-multiverse"
      },
      "homes": {
        "title": "Homes (Parallel HomeKit Bridges)",
        "type": "array",
        "items": {
          "type": "object",
          "required": ["name", "username", "port"],
          "properties": {
            "name": {
              "title": "Home Name",
              "type": "string"
            },
            "username": {
              "title": "Username (MAC-like)",
              "type": "string",
              "pattern": "^[0-9A-F]{2}(:[0-9A-F]{2}){5}$"
            },
            "port": {
              "title": "Port",
              "type": "integer",
              "minimum": 1025,
              "maximum": 65535
            },
            "pincode": {
              "title": "PIN (optional, default 031-45-154)",
              "type": "string",
              "pattern": "^[0-9]{3}-[0-9]{2}-[0-9]{3}$"
            },
            "includeAccessories": {
              "title": "Include accessories (name/UUID contains)",
              "type": "string",
              "description": "Comma-separated list. If set, only accessories whose name or UUID contains one of these strings (case-insensitive) will be mirrored into this multiverse home."
            },
            "excludeAccessories": {
              "title": "Exclude accessories (name/UUID contains)",
              "type": "string",
              "description": "Comma-separated list. Accessories whose name or UUID contains one of these strings (case-insensitive) will not be mirrored into this multiverse home."
            }
          }
        }
      }
    },
    "required": ["platform", "homes"]
  },
  "layout": [
    {
      "type": "section",
      "items": [
        "platform"
      ]
    },
    {
      "type": "array",
      "key": "homes",
      "title": "Homes",
      "add": "Add Home",
      "items": [
        {
          "type": "section",
          "items": [
            "homes[].name",
            "homes[].username",
            "homes[].port",
            "homes[].pincode",
            "homes[].includeAccessories",
            "homes[].excludeAccessories"
          ]
        }
      ]
    }
  ]
}
